https://bloglinux.ru/378-zagruzochnaja-fleshka-windows-v-linux.html

Загрузочная флешка Windows в Linux

Бывают случаи, когда вам нужно записать Windows на флешку в Linux, например, когда вы хотите поставить эту систему второй для использования специализированных программ, или вам нужно переустановить операционку своим знакомым. Или же есть пользователи Linux, которые решили вернуться на Windows, но единственную флешку уже перезаписали под Linux LiveUSB.

Загрузочную флешку можно создать с помощью терминала или специальных графических утилит. Сначала рассмотрим ручной способ.




Способ 1. Терминал и Gparted

Запустите терминал через главное меню или с помощью сочетания клавиш "Ctrl + Alt + T" в Ubuntu и Ubuntu-подобных, кроме Kubuntu.

    Первый вариант

        использовать команду dd:  dd if=/windows.iso of=/dev/sdx


    Второй вариант

Установите gparted и ntfsprogs. В Ubuntu для этого используйте команду: sudo apt install gparted ntfsprogs

Далее нам нужно отформатировать флешку. Можно сделать это через gparted, а можно в терминале.
Для форматирования USB-накопителя в Gparted в правом верхнем углу нажимаем на иконку диска и выбираем флешку.
Правой кнопкой мыши вызываем контекстное меню для раздела и жмем "Отмонтировать".
Затем нажимаем "форматировать в …" в открывшемся меню выбираем "ntfs". Нажимаем "применить".
Отвечаем на вопрос "Применить эту операцию?" согласием.

Командой все сделать немного проще: sudo mkfs.ntfs /dev/sdb1

Вместо sdb1 название вашей флешки (не метка!). Чтобы узнать как она называется выполните: fdisk -l

Идём дальше. Откройте Gparted, если вы его ещё не открыли и выберите флешку, если ещё не выбрали. Нажмите правой кнопкой мыши и выберите "Установить флаги". Поставьте галочку boot и нажмите "применить".

Дальше нужно открыть образ windows.iso.

sudo mkdir /media/iso
sudo mount windows7.iso /media/iso -t udf -o loop

Осталось только скопировать все файлы из образа на флешку: cp -R /media/iso/* /run/media/имя_флешки

Где /run/media/имя_флешки - точка монтирования вашей флешки. Его можно посмотреть просто перейдя в папку /run/media или /media и посмотрев название вложенной туда папки.

ls /run/media

Это был способ для тех, кто не любит ставить много одноразовых утилит в систему. Создание загрузочной флешки Windows в Linux с помощью сторонних утилит выглядит проще.




Способ 2. утилита winUSB

Пожалуй, это самый простой способ создания. Установка в Ubuntu:

sudo add-apt-repository ppa:colingille/freshlight
sudo apt update
sudo apt install winusb

Установка Debian / Ubuntu 14

sudo add-apt-repository ppa:colingille/freshlight
sudo apt-get update
sudo apt-get install winusb

Интерфейс простой. Нажмите сверху на кнопку "Обзор"(иконка папка) и выберите образ. Затем нажмите "Install" и дождитесь окончания.




Способ 3. Утилита Etcher

Если WinUSB не помог, не запустился, его нет для вашего дистрибутива, вам поможет утилита Etcher. Утилита в настоящее время находится в интенсивной разработке, но даже в бета-версии программа исправно выполняет свою функцию писателя iso-образов. Etcher поддерживает запись Linux, macos 10.9 +, Windows 7+. Может быть, создана загрузочная флешка Windows 10 в Linux.
После установки вы можете запустить программу из главного меню или из appimage файла, если вы выбрали этот путь. Когда программа запустится, найдите у себя загруженный iso-образ.
Вставьте флешку. Нажмите кнопку "Flash" и дождитесь окончания записи. У вас появится примерно такая надпись: Flash Complete!




ЗАГРУЗОЧНАЯ ФЛЕШКА СОЗДАННАЯ С ПОМОЩЬЮ КОМАНДНОЙ СТРОКИ Windows:

► 1. Откройте командную строку от имени администратора.
► 2. Введите команду diskpart.
► 3. Дальше напишите list disk, в результате чего будет показан список доступных носителей. В списке выберете тот, на который нужно будет записывать образ операционной системы. Узнать его можно по размеру. Запомните его номер.
► 4. Введите select disk [номер накопителя]. В нашем примере это диск 6, поэтому вводим select disk 6.
► 5. После этого напишите clean, чтобы полностью стереть выбранную флешку.
► 6. Теперь укажите команду create partition primary, которая создаст новый раздел на ней.
► 7. Отформатируйте Ваш накопитель командой format fs=fat32 quick (quick означает быстрое форматирование).
► 8. Сделайте раздел активным с помощью active. Это означает, что он станет доступным для загрузки на компьютере.
► 9. Присвойте разделу уникальное имя (это происходит в автоматическом режиме) командой assign.
► 10. Теперь посмотрите, какое имя было присвоено – list volume. В нашем примере носитель получил название М. Это тоже можно узнать по размеру тома.
► 11. Выход с помощью команды exit.
► 12. Загрузочная флешка создана, теперь на нее необходимо сбросить образ операционной системы.

Готово! Загрузочный носитель создан и с него можно устанавливать операционную систему.

КРАТКО:
    ► diskpart
	► list disk
	► select disk 2
	► clean
	► create partition primary
	► format fs=fat32 quick
	► active
	► assign
	► list volume
	► exit

Этим способом я вылечил флешку, которая не хотела быть загрузочной, РАБОТАЕТ! Windows 10 носитель я создавал.
